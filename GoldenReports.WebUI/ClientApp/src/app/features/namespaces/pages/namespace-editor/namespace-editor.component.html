<ng-container *ngIf="vm$ | async as vm">
  <app-error-message [error]="vm.error"></app-error-message>
  <form
    nz-form
    [formGroup]="namespaceForm"
    appStateFormBinding="namespace"
    (ngSubmit)="saveNamespace(vm.namespace?.id, namespaceForm.value)"
  >
    <nz-form-item>
      <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="name" nzRequired
        >Name</nz-form-label
      >
      <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Name is required">
        <input nz-input id="name" formControlName="name" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="description"
        >Description</nz-form-label
      >
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <input nz-input id="description" formControlName="description" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row class="register-area">
      <nz-form-control [nzSpan]="14" [nzOffset]="6">
        <button
          nz-button
          nzType="primary"
          [nzLoading]="vm.saving"
          [disabled]="!vm.canSave"
        >
          Save
        </button>
      </nz-form-control>
    </nz-form-item>
  </form>
</ng-container>
